<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translator - Jason's Homepage</title>
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <div class="page-wrapper">
      <a href="#main" class="skip-to-main">Skip to main content</a>
      
      <nav>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/games/">Games</a></li>
          <li><a href="/tools/">Tools</a></li>
          <li><a href="/simulators/">Simulators</a></li>
          <li><a href="/lab/">Lab</a></li>
        </ul>
      </nav>

      <main id="main">
        <div class="container">
          <h1>ğŸŒ Translator</h1>
          <p class="subtitle">Translate text between languages</p>
          
          <div class="translation-section">
            <div class="translation-title">ğŸŒ Text Translator</div>
            
            <div class="translation-container">
              <div class="translation-box">
                <div class="translation-label">
                  From:
                  <select id="sourceLang" class="language-select">
                    <option value="auto">Auto-detect</option>
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="pt">Portuguese</option>
                    <option value="nl">Dutch</option>
                    <option value="pl">Polish</option>
                    <option value="ru">Russian</option>
                    <option value="ja">Japanese</option>
                    <option value="zh">Chinese (Simplified)</option>
                    <option value="ko">Korean</option>
                    <option value="ar">Arabic</option>
                    <option value="hi">Hindi</option>
                  </select>
                </div>
                <textarea id="sourceText" placeholder="Enter text to translate..."></textarea>
                <div class="character-count"><span id="sourceCount">0</span>/5000</div>
              </div>

              <div class="translation-box">
                <div class="translation-label">
                  To:
                  <select id="targetLang" class="language-select">
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="it">Italian</option>
                    <option value="pt">Portuguese</option>
                    <option value="nl">Dutch</option>
                    <option value="pl">Polish</option>
                    <option value="ru">Russian</option>
                    <option value="ja">Japanese</option>
                    <option value="zh">Chinese (Simplified)</option>
                    <option value="ko">Korean</option>
                    <option value="ar">Arabic</option>
                    <option value="hi">Hindi</option>
                  </select>
                </div>
                <textarea id="translatedText" placeholder="Translation will appear here..." readonly></textarea>
                <div class="character-count"><span id="targetCount">0</span>/5000</div>
              </div>
            </div>

            <div class="translation-controls">
              <button id="translateBtn">Translate</button>
              <button id="swapBtn" class="swap-btn">â‡„ Swap</button>
              <button id="copyBtn" class="copy-btn">ğŸ“‹ Copy</button>
            </div>

            <div id="translationStatus" class="translation-status"></div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // Translation Feature
      const sourceText = document.getElementById('sourceText');
      const translatedText = document.getElementById('translatedText');
      const sourceLang = document.getElementById('sourceLang');
      const targetLang = document.getElementById('targetLang');
      const translateBtn = document.getElementById('translateBtn');
      const swapBtn = document.getElementById('swapBtn');
      const copyBtn = document.getElementById('copyBtn');
      const sourceCount = document.getElementById('sourceCount');
      const targetCount = document.getElementById('targetCount');
      const translationStatus = document.getElementById('translationStatus');

      // Update character count
      sourceText.addEventListener('input', () => {
        sourceCount.textContent = sourceText.value.length;
      });

      translatedText.addEventListener('input', () => {
        targetCount.textContent = translatedText.value.length;
      });

      // Translate function using free API
      async function translate() {
        const text = sourceText.value.trim();
        if (!text) {
          showStatus('Please enter text to translate', 'error');
          return;
        }
        if (text.length > 5000) {
          showStatus('Text exceeds 5000 characters', 'error');
          return;
        }
        showStatus('Translating...', 'loading');
        try {
          const source = sourceLang.value === 'auto' ? 'auto' : sourceLang.value;
          const target = targetLang.value;
          const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${source}|${target}`;
          const response = await fetch(url);
          const data = await response.json();
          if (data.responseStatus === 200) {
            translatedText.value = data.responseData.translatedText;
            targetCount.textContent = data.responseData.translatedText.length;
            showStatus('Translation successful!', 'success');
          } else {
            showStatus('Translation failed. Please try again.', 'error');
          }
        } catch (error) {
          showStatus('Error: Unable to connect to translation service', 'error');
          console.error('Translation error:', error);
        }
      }

      function showStatus(message, type) {
        translationStatus.textContent = message;
        translationStatus.className = `translation-status show ${type}`;
        if (type !== 'loading') {
          setTimeout(() => {
            translationStatus.classList.remove('show');
          }, 3000);
        }
      }

      function swapLanguages() {
        const temp = sourceLang.value;
        sourceLang.value = targetLang.value;
        targetLang.value = temp;
        const tempText = sourceText.value;
        sourceText.value = translatedText.value;
        translatedText.value = tempText;
        sourceCount.textContent = sourceText.value.length;
        targetCount.textContent = translatedText.value.length;
      }

      function copyToClipboard() {
        if (!translatedText.value) {
          showStatus('Nothing to copy', 'error');
          return;
        }
        navigator.clipboard.writeText(translatedText.value).then(() => {
          showStatus('Copied to clipboard!', 'success');
        }).catch(() => {
          showStatus('Failed to copy', 'error');
        });
      }

      translateBtn.addEventListener('click', translate);
      swapBtn.addEventListener('click', swapLanguages);
      copyBtn.addEventListener('click', copyToClipboard);

      sourceText.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key === 'Enter') {
          translate();
        }
      });
    </script>
  </body>
</html>